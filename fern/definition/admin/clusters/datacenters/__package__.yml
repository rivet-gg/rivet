# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  localCommons: ../../common.yml

service:
  auth: true
  base-path: /admin/clusters/{cluster_id}/datacenters
  path-parameters:
    cluster_id:
      type: uuid
  endpoints:
    list:
      path: ""
      method: GET
      docs: Get datacenters of a cluster
      response: ListResponse
    create:
      path: ""
      method: POST
      request:
        body: CreateRequest
      response: CreateResponse
    update:
      path: /{datacenter_id}
      path-parameters:
        datacenter_id:
          type: uuid
      method: PATCH
      request:
        body: UpdateRequest
    taint:
      path: /{datacenter_id}/taint
      path-parameters:
        datacenter_id:
          type: string
      method: GET

types:
  ListResponse:
    properties:
      datacenters: list<localCommons.Datacenter>
  CreateRequest:
    properties:
      display_name: string
      name_id: string
      provider: localCommons.Provider
      provider_datacenter_id: string
      build_delivery_method: localCommons.BuildDeliveryMethod
  CreateResponse:
    properties:
      datacenter_id: uuid
  UpdateRequest:
    properties:
      pool_type: localCommons.PoolType
      hardware: list<localCommons.Hardware>
      desired_count: optional<integer>
      max_count: optional<integer>
      drain_timeout: optional<long>
